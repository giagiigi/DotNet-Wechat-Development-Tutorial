using MY.Utils.Serialize;
using MY.Utils.Service;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.Mvc;
using youxuewangGenerated.Tables;
using yxw.DTOModels.chanpin;

namespace WebApplicationPayonlineDemo.Controllers
{
     public class HomeController : Controller
    {

        List<orders> olist = new List<orders>();
        public ActionResult Index()
        {
            Encoding utf8 = Encoding.UTF8;
            Response.ContentEncoding = utf8;
            Request.ContentEncoding = utf8;

            //CpModel model = new CpModel();// copyModel();


            //string ToHexStr = @"efbbbf3c3f786d6c2076657273696f6e3d22312e302220656e636f64696e673d227574662d38223f3e3c43704d6f64656c3e3c73686f7770726963653e303c2f73686f7770726963653e3c646179733e313c2f646179733e3c70726f64756374747970653e303c2f70726f64756374747970653e3c62616f6a69616368656e6772656e3e303c2f62616f6a69616368656e6772656e3e3c62616f6a69617875657368656e673e303c2f62616f6a69617875657368656e673e3c62616f6a69616572746f6e673e303c2f62616f6a69616572746f6e673e3c62616f6a69613e303c2f62616f6a69613e3c73616c65736e756d3e303c2f73616c65736e756d3e3c7964747970653e313c2f7964747970653e3c6f746169643e303c2f6f746169643e3c76697369626c653e303c2f76697369626c653e3c63617061636974795f6d696e3e34303c2f63617061636974795f6d696e3e3c63617061636974795f6d61783e3430303c2f63617061636974795f6d61783e3c636c69636b6e756d3e303c2f636c69636b6e756d3e3c70616978753e303c2f70616978753e3c636f64653e43502d424a58432d3030303037303c2f636f64653e3c63706e616d65202f3e3c6d656d6f202f3e3c61726561636f64653e424a58433c2f61726561636f64653e3c64657074636f64653e53513c2f64657074636f64653e3c736872713ee69599e5b8883be5ada6e7949f3b3c2f736872713e3c656469746e616d65202f3e3c6564697474696d65202f3e3c696e73757265636f6465202f3e3c7669736174797065202f3e3c6772616465202f3e3c766973616d656d6f202f3e3c66616e67616e66756a69616e202f3e3c6d696e6765202f3e3c7869616e676775616e78696e7869202f3e3c7a69666569676f757775202f3e3c75706572202f3e3c757074696d65202f3e3c62616f6a69617368756f6d696e67202f3e3c62616f6d696e6778757a6869202f3e3c7a687579697368697869616e67202f3e3c746562696574697368693e31e38081e5ad94e5ba99e5928ce59bbde5ad90e79b91e4b8a4e983a8e58886e4bba5e78fade4b8bae58d95e4bd8de794b1e8aeb2e8a7a3e59198e5b8a6e9a286e58f82e8a782efbc9be8aeb2e8a7a3e7bb93e69d9fe5908eefbc8ce4bba5e5b08fe7bb84e4b8bae58d95e4bd8de887aae794b1e58f82e8a782efbc9be887aae794b1e6b4bbe58aa8e58cbae59f9fe5b195e8a788e6a0b9e68daee585b7e4bd93e58f82e8a782e697b6e997b4e68980e5bc80e694bee5b195e8a788e4b8bae58786efbc8ce8a18ce7a88be4b8ade887aae794b1e6b4bbe58aa8e58f82e8a782e5b195e8a788e58cbae59f9fe4bb85e4be9be58f82e88083efbc9b266c743b62722667743b32e38081e59ca8e58f82e8a782e8bf87e7a88be4b8adefbc8ce99a8fe697b6e68bbfe5a5bde887aae5b7b1e79a84e99a8fe8baabe789a9e59381efbc8ce4b88de8a681e4b9b1e694beefbc8ce4bba5e998b2e4b8a2e5a4b1efbc8ce8838ce58c85e983bde5b0bde9878fe8838ce59ca8e5898de99da2efbc9b266c743b62722667743b33e38081e58f82e8a782e59084e4b8aae4b8bbe6aebfe79a84e8bf87e7a88be4b8adefbc8ce6b3a8e6848fe4b88de8a681e59ca8e997a8e5898de68ba5e68ca4efbc8ce4bba5e998b2e58f91e7949fe58db1e999a9efbc9b266c743b62722667743b34e38081e59ca8e58f82e8a782e8bf87e7a88be4b8adefbc8ce7a681e6ada2e99a8fe6848fe4b9b1e4b8a2e59e83e59cbeefbc8ce8afb7e788b1e68aa4e69687e789a9e58fa4e8bfb9efbc9b266c743b62722667743b35e38081e6b4bbe58aa8e697b6e997b4e4b8bae9a284e8aea1e697b6e997b4efbc8ce6a0b9e68daee5bd93e5a4a9e6b4bbe58aa8e68385e586b5e8bf9be8a18ce8b083e9858defbc9b266c743b62722667743b36e38081e59ba0e699afe782b9e4bd8de7bdaeefbc8ce4b88ae4b88be8bda6e59d87e4b8bae4b8b4e697b6e4b88ae4b88be8bda6e59cb0e782b9efbc8ce59ba0e591a8e8beb9e5819ce8bda6e78eafe5a283e69c89e99990efbc8ce99c80e8a681e4babae7ad89e8bda6efbc8ce8afb7e8b085e8a7a3efbc9b266c743b62722667743b37e38081e4b88be8bda6e4b98be5908ee99c80e8b5b0e5a4a7e6a6823130e58886e9929fe887b3e5ad94e5ba99efbc8ce8a18ce8b5b0e8bf87e7a88be8afb7e6b3a8e6848fe5ae89e585a8266c743b62722667743b38e38081e5a682e69c89e69995e8bda6e7ad89e789b9e6ae8ae68385e586b5efbc8ce8afb7e68f90e5898de5918ae79fa5e69785e8a18ce7a4bee68896e5afbce6b8b8efbc8ce4bba5e4bebfe5ae89e68e92e5baa7e4bd8defbc9b266c743b62722667743b39e38081e8a18ce8bda6e4b8ade8afb7e58bbfe99a8fe6848fe59ca8e8bda6e58ea2e58685e7ab99e7ab8be68896e8b5b0e58aa8efbc9b266c743b62722667743b3130e38081e8b4b5e9878de789a9e59381e4b88be8bda6e697b6e8afb7e99a8fe8baabe690bae5b8a6efbc8ce4b88de8a681e694bee59ca8e8bda6e58685efbc9b266c743b62722667743b3131e38081e59ca8e6b4bbe58aa8e8bf87e7a88be4b8adefbc8ce8afb7e5b086e6898be8a1a8e38081e9a1b9e993bee38081e6898be69cbae38081e5bebde7aba0e38081e992a5e58c99e7ad89e7a1ace8b4a8e789a9e59381e8a385e585a5e8838ce58c85efbc8ce8a1a3e8a3a4e5859ce58685e4b88de8a681e5ad98e694bee7a1ace8b4a8e789a9e59381efbc9b266c743b62722667743b3132e38081e8afb7e6a0b9e68daee887aae5b7b1e79a84e8baabe4bd93e78ab6e586b5e690bae5b8a6e4b880e4ba9be5bf85e5a487e79a84e88dafe59381efbc88e5a682efbc9ae6849fe58692e88dafe38081e6ada2e6b3bbe88dafe38081e69995e8bda6e88dafefbc89e38081e8a1a3e789a9e58f8ae99ba8e585b7266c743b62722667743b3133e38081e59ca8e6b4bbe58aa8e8bf87e7a88be4b8adefbc8ce8b79fe5a5bde69cace78fade5afbce6b8b8efbc8ce590ace4bb8ee5afbce6b8b8e5ae89e68e92efbc8ce8aea4e79c9fe590ace5afbce6b8b8e8aeb2e8a7a3266c743b62722667743b3c2f746562696574697368693e3c777570696e202f3e3c6265697a6875202f3e3c73686a6a3ee7a78be5ada33b3c2f73686a6a3e3c676f616c6d65616e73202f3e3c6c69616e676469616e3ee59bbde5ad90e79b91e698afe58583e6988ee6b885e4b889e4bba3e59bbde5aeb6e8aebee7ab8be79a84e69c80e9ab98e5ada6e5ba9ce5928ce69599e882b2e8a18ce694bfe7aea1e79086e69cbae69e84efbc8ce58f82e8a782e8be9fe99b8de5a4a7e6aebfefbc8ce5908ce5ada6e4bbace58fafe4bba5e4bab2e79cbce79baee79db9e58fa4e4bba3e89197e5908de5ada6e5ba9ce79a84e9a38ee98787efbc8ce6ada5e8a18ce69da5e588b0e5ad94e5ba99efbc8ce8bf99e9878ce698afe58583e6988ee6b885e4b889e4bba3e7a5ade7a580e5ad94e5ad90e79a84e59cb0e696b9efbc8ce4b880e8beb9e6aca3e8b58fe79d80e7a5ade5ad94e99fb3e4b990efbc8ce4b880e8beb9e89994e8af9ae79a84e58f82e8a782e8bf99e7bb84e58fa4e5bbbae7ad91efbc8ce6849fe58f97e5ad94e5ba99e79a84e6b593e98381e58fa4e5ada6e38082266c743b62722667743b3c2f6c69616e676469616e3e3c696d67666d202f3e3c667577756269616f7a68756e202f3e3c68756f646f6e6762616f6a6961202f3e3c6c5f6368616e70696e5f706963202f3e3c6c5f70726f647563745f636f757273653e3c737472696e673ee58e86e58fb23c2f737472696e673e3c737472696e673ee8afade696873c2f737472696e673e3c2f6c5f70726f647563745f636f757273653e3c6c5f70726f647563745f47726164653e3c737472696e673e332d34e5b9b4e7baa73c2f737472696e673e3c737472696e673e352d36e5b9b4e7baa73c2f737472696e673e3c737472696e673ee5889de4b8ad3c2f737472696e673e3c2f6c5f70726f647563745f47726164653e3c6c5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d30383c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d30393c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31303c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31313c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31323c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31333c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31343c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31353c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31363c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31373c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31383c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d31393c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32303c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32313c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32323c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32333c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32343c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32353c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32363c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32373c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32383c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d32393c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d30392d33303c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30313c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30323c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30333c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30343c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30353c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30363c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30373c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30383c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d30393c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31303c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31313c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31323c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31333c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31343c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31353c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31363c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31373c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31383c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d31393c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32303c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32313c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32323c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32333c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32343c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32353c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32363c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32373c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32383c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d32393c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e38313c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d33303c2f6461793e3c2f64746f5f70726f647563744461696c793e3c64746f5f70726f647563744461696c793e3c72656d61696e3e303c2f72656d61696e3e3c6164756c7470726963653e303c2f6164756c7470726963653e3c73747564656e7470726963653e37333c2f73747564656e7470726963653e3c6368696c6470726963653e303c2f6368696c6470726963653e3c70726f64756374636f64653e43502d30303037303c2f70726f64756374636f64653e3c6461793e323031352d31302d33313c2f6461793e3c2f64746f5f70726f647563744461696c793e3c2f6c5f70726f647563744461696c793e3c6c5f74726176656c706c616e3e3c64746f5f74726176656c706c616e3e3c7472617665706963202f3e3c6267706963202f3e3c6461796e6f3e313c2f6461796e6f3e3c666f6f64747970653ee887aae5a487266c743b62722667743b3c2f666f6f64747970653e3c7472616e73706f72743ee6b1bde8bda6266c743b62722667743b3c2f7472616e73706f72743e3c74726176656c706c616e746578743e30383a30307e30383a34303ae5ada6e6a0a1e99b86e59088e4b998e8bda6e5898de5be80e59bbde5ada6e69687e58c96e59fbae59cb0e28094e28094e5ad94e5ba99e5928ce59bbde5ad90e79b91e58d9ae789a9e9a686efbc9b266c743b62722667743b30383a34307e30393a30303ae883a1e5908ce58fa3e4b88be8bda6efbc8ce695b4e9989fe5898de5be80e6a380e7a5a8e5a484efbc8ce4bba5e78fade4b8bae58d95e4bd8de6a380e7a5a8e585a5e59badefbc9b266c743b62722667743b30393a30307e31303a30303ae58f82e8a782e79a87e5b89de7a5ade5ad94e79a84e59cbae68980e28094e28094e38090e5ad94e5ba99e38091efbc9ae58588e5b888e997a8e38081e5a4a7e68890e997a8e38081e5a4a7e68890e6aebfe38081e5b487e59ca3e7a5a0266c743b62722667743b31303a30307e31313a30303ae58f82e8a782e2809ce59bbde5aeb6e79a84e69c80e9ab98e5ada6e5ba9ce2809de28094e28094e38090e59bbde5ad90e79b91e38091efbc9ae99b86e8b4a4e997a8efbc88e5a4a7e997a8efbc89e38081e5a4aae5ada6e997a8efbc88e4ba8ce997a8efbc89e38081e79089e79283e7898ce59d8ae38081e8be9fe69381e6aebfe38081e5bd9de4bca6e5a082e38081e695ace4b880e4baadefbc8ce58d81e4b889e7bb8fe7a291e69e97efbc9b266c743b62722667743b31313a30307e31323a30303ae887aae794b1e6b4bbe58aa8e58f82e8a782e38090e5a4a7e59389e5ad94e5ad90e5b195e38091e38081e38090e5a4a7e68890e7a4bce4b990e5b195e6bc94e38091e38081e38090e4b8ade59bbde58fa4e4bba3e7a791e4b8bee5b195e38091e7ad89e99988e58897e5b195266c743b62722667743b31323a30307e31323a34303ae58d9ae789a9e9a686e997a8e58fa3e99b86e59088efbc8ce4b998e8bda6e8bf94e59b9ee5ada6e6a0a1efbc81266c743b62722667743b3c2f74726176656c706c616e746578743e3c2f64746f5f74726176656c706c616e3e3c2f6c5f74726176656c706c616e3e3c2f43704d6f64656c3e";
            //model = (CpModel)model.FromHex(ToHexStr);

            return View();
        }

        public ActionResult About()
        {
            ViewBag.Message = "Your application description page.";

            return View();
        }

        public ActionResult Contact()
        {
            ViewBag.Message = "Your contact page.";

            return View();
        }

        public ActionResult GetOrderCount()
        {
            olist = new orders().Select("order by sumittime desc");
            return Content(olist.Count.ToString());
        }

        public ActionResult LoadOrders(int pageno, int pagesize)
        {
            olist = new orders().Select("order by sumittime desc");

            string json = "";
            //用于返回的的产品列表
            List<OrderInfo> oilist = new List<OrderInfo>();
            if (pageno <= 0 || pagesize <= 0)
            {
                json = JsonHelper.JsonSerializer<List<OrderInfo>>(oilist);
                return Content(json);
            }

            for (int i = (pageno - 1) * pagesize; i < pageno * pagesize; i++)
            {

                if (i >= olist.Count)
                    continue;

                orders o = olist[i];
                OrderInfo oi = new OrderInfo();
                oi.product_code = o.product_code;
                oi.orderno = o.orderno;
                oi.num = o.num;
                oi.paytime = o.paytime;
                oi.paytype = o.paytype;
                oi.price = o.price;
                oi.product_desc = o.product_desc;
                oi.product_name = o.product_name;
                oi.submittime = o.sumittime;
                oi.transaction_id = o.transaction_id;
                oi.cash_fee = o.cash_fee;
                if (o.paytime == "")
                    oi.paystate = "未付款";
                else
                    oi.paystate = "已付款";

                oilist.Add(oi);
            }
            //   int pagecount = (int)Math.Ceiling(cplist.Count * 1.0 / pagesize);


            json = JsonHelper.JsonSerializer<List<OrderInfo>>(oilist);

            return Content(json);
        }
        public ActionResult Pay(string cpcode, string cpname, string cpdesc, float price, int num, int paytype/*1-支付宝,2-微信*/)
        {
            orders o = new orders();
            o.orderno = generate_orderno(1, 1);
            o.product_code = cpcode;
            o.product_name = cpname;
            o.product_desc = cpdesc;
            o.price = price;
            o.num = num;
            switch (paytype)
            {
                case 1:
                    o.paytype = "支付宝";
                    break;
                case 2:
                    o.paytype = "微信支付";
                    break;
                case 3:
                    o.paytype = "银联支付";
                    break;
            }

            o.sumittime = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss");
            o.Insert();
            float f = price * 100.0F * num;
            int total_fee = (int)f;
            LogService.LOG_LEVENL = 3;
            LogService.Debug(this.GetType().ToString(), "total_fee="+ f);

            switch (paytype)
            {
                case 1:
                    Response.Redirect(Url.Action("Index", "aliPay") + "?productCode=" + cpcode + "&productName=" + cpname + "&productDesc=" + cpdesc + "&orderno=" + o.orderno + "&total_fee=" + total_fee);
                    break;
                case 2:
                    Response.Redirect(Url.Action("Index", "Weixin") + "?productCode=" + cpcode + "&productName=" + cpname + "&productDesc=" + cpdesc + "&orderno=" + o.orderno + "&total_fee=" + total_fee);
                    break;
                case 3:
                    Response.Redirect(Url.Action("Index", "Bank") + "?productCode=" + cpcode + "&productName=" + cpname + "&productDesc=" + cpdesc + "&orderno=" + o.orderno + "&total_fee=" + total_fee);
                    break;

            }
            return Content("");
        }

        /// <summary>
        /// 生成订单号
        /// </summary>
        /// <param name="group_type">团队类型。0-散客、1-团队</param>
        /// <param name="product_type">产品类型。1-旅游线路，2-租车</param>
        private string generate_orderno(int group_type,int product_type)
        {
            Random rand = new Random();

            string orderno = group_type.ToString() + product_type.ToString() + DateTime.Now.ToString("yyMMddHHmmssfff") + rand.Next(100).ToString();
            return orderno;
        }

        public ActionResult Orderlist()
        {


            return View("");
        }

    }


}